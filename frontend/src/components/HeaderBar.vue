<template>
  <header class="header-bar">
    <div class="logo">ğŸ—ºï¸ ì—¬í–‰ ë„ìš°ë¯¸</div>
    <div class="actions">
      <span v-if="userStore.isLoggedIn">
        <b>{{ userStore.user.name }}</b>ë‹˜
        <button class="logout-btn" @click="logout">ë¡œê·¸ì•„ì›ƒ</button>
      </span>
      <span v-else>
        <button class="login-btn" @click="showLogin = true">ë¡œê·¸ì¸</button>
        <button class="register-btn" @click="showRegister = true">íšŒì›ê°€ì…</button>
      </span>
    </div>
    <AuthModal v-if="showLogin" mode="login" @close="showLogin = false" />
    <AuthModal v-if="showRegister" mode="register" @close="showRegister = false" />
  </header>
</template>

<script setup>
import { ref } from 'vue'
import { useUserStore } from '../stores/user'
import AuthModal from './AuthModal.vue'
import '../styles/HeaderBar.css'

const userStore = useUserStore()
const showLogin = ref(false)
const showRegister = ref(false)

function logout() {
  userStore.logout()
}
</script> 